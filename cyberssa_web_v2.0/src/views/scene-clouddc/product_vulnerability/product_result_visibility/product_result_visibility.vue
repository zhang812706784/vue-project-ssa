<template>
  <div class="product-result">
    <Tabs value="loopHoleAnalyze">
      <TabPane label="漏洞分析" name="loopHoleAnalyze">
        <div class="loop-hole-analyze">
          <div class="loop-hole-chart loop-hole-chart-type">

          </div>
          <div class="loop-hole-chart">

          </div>
          <div class="loop-hole-chart">

          </div>
          <div class="loop-hole-chart">

          </div>
          <div class="loop-hole-chart">

          </div>
          <div class="loop-hole-chart">

          </div>
        </div>
      </TabPane>
      <TabPane label="漏洞列表" name="loopHoleList">
        <!-- ref="formInline" :model="formInline" :rules="ruleInline" -->
        <Form inline label-position="left">
          <FormItem label="漏洞名称" :label-width="100">
            <Input type="text" placeholder="Username">
            </Input>
          </FormItem>
          <FormItem label="主机" :label-width="100">
            <Input type="text" placeholder="Username">
            </Input>
          </FormItem>
          <FormItem label="位置" :label-width="100">
            <Input type="text" placeholder="Username">
            </Input>
          </FormItem>
          <FormItem label="扫描方式" :label-width="100">
            <Input type="text" placeholder="Username">
            </Input>
          </FormItem>
          <FormItem label="漏洞等级" :label-width="100">
            <Input type="text" placeholder="Username">
            </Input>
          </FormItem>
          <FormItem>
            <Button type="primary" @click="handleSubmit('formInline')">查询</Button>
            <Button type="primary" @click="handleSubmit('formInline')">重置</Button>
          </FormItem>
        </Form>
      </TabPane>
    </Tabs>
    <div class="loophole-filter">
      <Button @click="setting = true" style="margin-left: 8px">{{$t('筛选')}}</Button>
    </div>
    <Modal v-model="setting" title="页面查询配置" ok-text="查询" cancel-text="重置">
      <Form inline label-position="left">
        <FormItem label="漏洞名称" :label-width="100">
          <div :class="{'tag-item':true,'checked':allChecked}" @click="allCheckedList(tagListOfLoopholeName,allChecked)" style="display:block;max-width:60px">
            全部
          </div>
          <div v-for="item in tagListOfLoopholeName" :class="{'tag-item':true,'checked':item.checked}" @click="checkedTag(item,'tagListOfLoopholeName')">
            {{item.name}}
          </div>
          <Input type="text" placeholder="自定义搜索条件" />
        </FormItem>
        <FormItem label="漏洞主机" :label-width="100">
          <Input type="text" placeholder="自定义搜索条件" />
        </FormItem>
        <FormItem label="漏洞位置" :label-width="100">
          <Input type="text" placeholder="自定义搜索条件" />
        </FormItem>
        <FormItem label="漏洞最多的地区" :label-width="100">
          <Input type="text" placeholder="自定义搜索条件" />
        </FormItem>
      </Form>
    </Modal>
  </div>
</template>

<script>
import TpTable from '@/components/locale-components/tp-table/tp-table';
import TpSsaEcharts from '@/components/locale-components/tp-ssa-echarts/tp-ssa-echarts';
export default {
  name: 'product_result_visibility',
  components: { TpSsaEcharts, TpTable },
  data() {
    return {
      allChecked: false,
      setting: false,
      tagListOfLoopholeName: [
        { name: 'Services', checked: false },
        { name: 'OS Detection Consolidation and Reporting', checked: true },
        { name: 'Traceroute', checked: false },
        { name: 'CGI Scanning Consolidation', checked: false },
        { name: 'DIRB(NASL wrapper)', checked: false },
        { name: 'Hrrp Security Headers', checked: false },
        { name: 'ICMP Timestamp Detection', checked: false },
        { name: 'wapiti (NASL wrapper)', checked: false },
        { name: 'HTTP Server type and version', checked: false },
        { name: 'Nikto (NASL wrapper)', checked: false }
      ]
    };
  },
  created() {},
  methods: {
    allCheckedList(list, allChecked) {
      this.allChecked = !allChecked;
      for (let i of list) {
        i.checked = this.allChecked;
      }
    },
    checkedTag(item, list) {
      item.checked = !item.checked;
      if (!item.checked) {
        this.allChecked = false;
        return;
      }
      if (
        this[list].filter(v => {
          return !v.checked;
        }).length === 0
      ) {
        this.allChecked = true;
      }
    }
  }
};
</script>

<style scoped>
.loop-hole-analyze {
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  justify-content: space-around;
  padding: 8px;
}

.loop-hole-analyze .loop-hole-chart {
  margin: 8px;
  flex: 0 1 48%;
  height: 200px;
  min-width: 200px;
  background-color: white;
}

.loophole-filter {
  position: absolute;
  top: 12px;
  right: 16px;
}

.tag-item {
  display: inline-block;
  text-align: center;
  padding: 0 8px;
  margin: 4px;
  border: 1px solid transparent;
  color: lightgray;
  cursor: pointer;
  /* box-sizing: border-box; */
}

.tag-item.checked {
  border: 1px solid white;
  color: white;
}
</style>
